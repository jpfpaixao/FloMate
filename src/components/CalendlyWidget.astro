---
interface Props {
  url?: string;
  height?: string;
}

const { url = 'https://calendly.com/flomate/30min', height = '800px' } = Astro.props;
---

<div class="calendly-widget-container">
  <div class="calendly-inline-widget" data-url={url} style={`width:100%;min-width:320px;height:${height};`}></div>
</div>

<script is:inline>
  (function() {
    const loadCalendly = () => {
      if (document.querySelector('script[src="https://assets.calendly.com/assets/external/widget.js"]')) {
        return;
      }
      
      const script = document.createElement('script');
      script.src = 'https://assets.calendly.com/assets/external/widget.js';
      script.async = true;
      document.head.appendChild(script);
    };
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', loadCalendly);
    } else {
      loadCalendly();
    }
  })();
</script>

<style>
  .calendly-widget-container {
    width: 100%;
    max-width: none;
    margin: 0 auto;
    padding: 0 20px;
  }

  .calendly-inline-widget {
    border-radius: 8px;
  }
</style>
